"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[208],{3208:(F,p,a)=>{a.r(p),a.d(p,{RevenuePage:()=>_,default:()=>x});var g=a(467),u=a(2200),o=a(5845),h=a(5079),c=a(5873),n=a(3664),m=a(1467);function f(r,l){1&r&&(n.j41(0,"div",11),n.nrm(1,"ion-spinner",14),n.j41(2,"p"),n.EFF(3,"Cargando ingresos..."),n.k0s()())}function v(r,l){if(1&r&&(n.j41(0,"div",12)(1,"ion-card",15)(2,"ion-card-header"),n.nrm(3,"ion-icon",16),n.j41(4,"ion-card-title"),n.EFF(5,"Ingresos Totales"),n.k0s()(),n.j41(6,"ion-card-content")(7,"div",17),n.EFF(8),n.nI1(9,"number"),n.k0s(),n.j41(10,"div",18),n.EFF(11),n.k0s()()(),n.j41(12,"ion-card",19)(13,"ion-card-header"),n.nrm(14,"ion-icon",20),n.j41(15,"ion-card-title"),n.EFF(16,"M\xe9todos de Pago"),n.k0s()(),n.j41(17,"ion-card-content")(18,"div",21)(19,"div",22),n.nrm(20,"ion-icon",23),n.k0s(),n.j41(21,"div",24)(22,"span",25),n.EFF(23,"Efectivo"),n.k0s(),n.j41(24,"span",26),n.EFF(25),n.k0s()(),n.j41(26,"div",27),n.EFF(27),n.nI1(28,"number"),n.k0s()(),n.j41(29,"div",21)(30,"div",22),n.nrm(31,"ion-icon",20),n.k0s(),n.j41(32,"div",24)(33,"span",25),n.EFF(34,"Tarjeta"),n.k0s(),n.j41(35,"span",26),n.EFF(36),n.k0s()(),n.j41(37,"div",27),n.EFF(38),n.nI1(39,"number"),n.k0s()(),n.j41(40,"div",21)(41,"div",22),n.nrm(42,"ion-icon",28),n.k0s(),n.j41(43,"div",24)(44,"span",25),n.EFF(45,"Transferencia"),n.k0s(),n.j41(46,"span",26),n.EFF(47),n.k0s()(),n.j41(48,"div",27),n.EFF(49),n.nI1(50,"number"),n.k0s()()()(),n.j41(51,"ion-card",29)(52,"ion-card-header"),n.nrm(53,"ion-icon",30),n.j41(54,"ion-card-title"),n.EFF(55,"Habitaciones Vendidas"),n.k0s()(),n.j41(56,"ion-card-content")(57,"div",17),n.EFF(58),n.k0s(),n.j41(59,"div",18),n.EFF(60,"Total del mes"),n.k0s(),n.j41(61,"div",31)(62,"div",32)(63,"span",33),n.EFF(64,"Sencilla"),n.k0s(),n.j41(65,"span",34),n.EFF(66),n.k0s()(),n.j41(67,"div",32)(68,"span",33),n.EFF(69,"Doble"),n.k0s(),n.j41(70,"span",34),n.EFF(71),n.k0s()(),n.j41(72,"div",32)(73,"span",33),n.EFF(74,"Triple"),n.k0s(),n.j41(75,"span",34),n.EFF(76),n.k0s()()()()(),n.j41(77,"ion-card",35)(78,"ion-card-header"),n.nrm(79,"ion-icon",36),n.j41(80,"ion-card-title"),n.EFF(81,"Facturas Fiscales"),n.k0s()(),n.j41(82,"ion-card-content")(83,"div",17),n.EFF(84),n.k0s(),n.j41(85,"div",18),n.EFF(86,"Facturas emitidas este mes"),n.k0s()()()()),2&r){const e=n.XpG();n.R7$(8),n.SpI("RD$",n.i5U(9,14,e.revenue.total,"1.0-0")),n.R7$(3),n.Lme("",e.revenue.month," ",e.revenue.year),n.R7$(14),n.SpI("",e.getPercentage(e.revenue.cash),"%"),n.R7$(2),n.SpI("RD$",n.i5U(28,17,e.revenue.cash,"1.0-0")),n.R7$(9),n.SpI("",e.getPercentage(e.revenue.card),"%"),n.R7$(2),n.SpI("RD$",n.i5U(39,20,e.revenue.card,"1.0-0")),n.R7$(9),n.SpI("",e.getPercentage(e.revenue.transfer),"%"),n.R7$(2),n.SpI("RD$",n.i5U(50,23,e.revenue.transfer,"1.0-0")),n.R7$(9),n.JRh(e.revenue.totalRoomsSold),n.R7$(8),n.JRh(e.revenue.sencillaCount),n.R7$(5),n.JRh(e.revenue.dobleCount),n.R7$(5),n.JRh(e.revenue.tripleCount),n.R7$(8),n.JRh(e.revenue.fiscalCount)}}function M(r,l){if(1&r&&(n.j41(0,"div",13),n.nrm(1,"ion-icon",37),n.j41(2,"h3"),n.EFF(3,"Sin ingresos registrados"),n.k0s(),n.j41(4,"p"),n.EFF(5),n.k0s()()),2&r){const e=n.XpG();n.R7$(5),n.Lme("",e.months[e.selectedMonth]," ",e.selectedYear)}}let _=(()=>{var r;class l{constructor(t,s){this.hotelService=t,this.menuCtrl=s,this.revenue=null,this.loading=!1,this.selectedMonth=(new Date).getMonth(),this.selectedYear=(new Date).getFullYear(),this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],(0,h.a)({refreshOutline:c.mVv,walletOutline:c.eF1,cardOutline:c.VR9,cashOutline:c.A3w,swapHorizontalOutline:c.Ilt,bedOutline:c.oGU,documentTextOutline:c.pXZ,menuOutline:c.Kuj})}ngOnInit(){this.loadRevenue()}openMenu(){var t=this;return(0,g.A)(function*(){yield t.menuCtrl.open("main-menu")})()}loadRevenue(){var t=this;return(0,g.A)(function*(){t.loading=!0;try{t.revenue=yield t.hotelService.getMonthlyRevenue(t.selectedMonth,t.selectedYear)}catch(s){console.error("Error loading revenue:",s)}finally{t.loading=!1}})()}prevMonth(){0===this.selectedMonth?(this.selectedMonth=11,this.selectedYear--):this.selectedMonth--,this.loadRevenue()}nextMonth(){11===this.selectedMonth?(this.selectedMonth=0,this.selectedYear++):this.selectedMonth++,this.loadRevenue()}getPercentage(t){return this.revenue&&0!==this.revenue.total?Math.round(t/this.revenue.total*100):0}static#n=r=()=>(this.\u0275fac=function(s){return new(s||l)(n.rXU(m.g),n.rXU(o._t))},this.\u0275cmp=n.VBU({type:l,selectors:[["app-revenue"]],decls:24,vars:5,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","menu-outline"],["slot","end"],["slot","icon-only","name","refresh-outline"],[1,"revenue-content"],[1,"month-selector"],[1,"arrow-btn",3,"click"],[1,"month-label"],[1,"month-name"],[1,"year-name"],[1,"loading-container"],[1,"revenue-cards"],[1,"empty-state"],["name","crescent"],[1,"total-card"],["name","wallet-outline"],[1,"big-amount"],[1,"period"],[1,"methods-card"],["name","card-outline"],[1,"payment-row"],[1,"pay-icon"],["name","cash-outline"],[1,"pay-info"],[1,"pay-name"],[1,"pay-pct"],[1,"pay-amount"],["name","swap-horizontal-outline"],[1,"rooms-card"],["name","bed-outline"],[1,"room-breakdown"],[1,"room-type"],[1,"rt-label"],[1,"rt-count"],[1,"fiscal-card"],["name","document-text-outline"],["name","bar-chart-outline",2,"font-size","48px","color","#ccc"]],template:function(s,i){1&s&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),n.bIt("click",function(){return i.openMenu()}),n.nrm(4,"ion-icon",2),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6,"Ingresos"),n.k0s(),n.j41(7,"ion-buttons",3)(8,"ion-button",1),n.bIt("click",function(){return i.loadRevenue()}),n.nrm(9,"ion-icon",4),n.k0s()()()(),n.j41(10,"ion-content",5)(11,"div",6)(12,"button",7),n.bIt("click",function(){return i.prevMonth()}),n.EFF(13,"\u2039"),n.k0s(),n.j41(14,"div",8)(15,"span",9),n.EFF(16),n.k0s(),n.j41(17,"span",10),n.EFF(18),n.k0s()(),n.j41(19,"button",7),n.bIt("click",function(){return i.nextMonth()}),n.EFF(20,"\u203a"),n.k0s()(),n.nVh(21,f,4,0,"div",11),n.nVh(22,v,87,26,"div",12),n.nVh(23,M,6,2,"div",13),n.k0s()),2&s&&(n.R7$(16),n.JRh(i.months[i.selectedMonth]),n.R7$(2),n.JRh(i.selectedYear),n.R7$(3),n.vxM(i.loading?21:-1),n.R7$(),n.vxM(!i.loading&&i.revenue?22:-1),n.R7$(),n.vxM(!i.loading&&i.revenue&&0===i.revenue.total?23:-1))},dependencies:[u.MD,o.eU,o.ai,o.BC,o.QW,o.Jm,o.iq,o.W9,o.b_,o.ME,o.tN,o.I9,o.w2,u.QX],styles:['@charset "UTF-8";.revenue-content[_ngcontent-%COMP%]{--background: #f5f5f5;--padding-start: 14px;--padding-end: 14px;--padding-top: 12px;--padding-bottom: 24px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #ffffff;--color: #000000;--border-color: #FFD700;border-bottom:3px solid #FFD700}ion-title[_ngcontent-%COMP%]{color:#000;font-weight:900;letter-spacing:1px}ion-button[_ngcontent-%COMP%]{--color: #000000}.month-selector[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff;border:2px solid #FFD700;border-radius:16px;padding:12px 16px;margin-bottom:16px;box-shadow:0 2px 10px #0000000f}.arrow-btn[_ngcontent-%COMP%]{background:gold;border:none;border-radius:10px;width:42px;height:42px;font-size:24px;font-weight:900;color:#000;cursor:pointer;display:flex;align-items:center;justify-content:center;-webkit-tap-highlight-color:transparent;box-shadow:0 2px 8px #ffd7004d}.arrow-btn[_ngcontent-%COMP%]:active{background:#e6c200;transform:scale(.95)}.month-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px}.month-name[_ngcontent-%COMP%]{font-size:18px;font-weight:900;color:#000;text-transform:capitalize}.year-name[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#888}.revenue-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}ion-card[_ngcontent-%COMP%]{margin:0;border-radius:18px;overflow:hidden;background:#fff;box-shadow:0 4px 16px #00000012;border:1px solid #f0f0f0}ion-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:16px 16px 8px}ion-card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px;flex-shrink:0;color:#000}ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:15px;font-weight:800;color:#000}ion-card-content[_ngcontent-%COMP%]{padding:8px 16px 16px}.big-amount[_ngcontent-%COMP%]{font-size:32px;font-weight:900;color:#000;line-height:1.1}.period[_ngcontent-%COMP%]{font-size:13px;color:#888;font-weight:600;margin-top:4px;text-transform:capitalize}.total-card[_ngcontent-%COMP%]{background:gold;border:none;box-shadow:0 6px 20px #ffd70059}.total-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#000}.total-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#000}.total-card[_ngcontent-%COMP%]   .big-amount[_ngcontent-%COMP%]{color:#000}.total-card[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{color:#0000008c}.payment-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 0;border-bottom:1px solid #f0f0f0}.payment-row[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.pay-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:10px;background:#fff8dc;display:flex;align-items:center;justify-content:center;flex-shrink:0}.pay-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#000}.pay-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.pay-name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#000}.pay-pct[_ngcontent-%COMP%]{font-size:12px;color:#888;font-weight:600}.pay-amount[_ngcontent-%COMP%]{font-size:15px;font-weight:900;color:#000}.room-breakdown[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:14px}.room-type[_ngcontent-%COMP%]{background:#fff8dc;border:1px solid #FFD700;border-radius:10px;padding:10px 8px;text-align:center}.rt-label[_ngcontent-%COMP%]{display:block;font-size:11px;font-weight:700;color:#666;margin-bottom:4px}.rt-count[_ngcontent-%COMP%]{display:block;font-size:22px;font-weight:900;color:#000;line-height:1}.fiscal-card[_ngcontent-%COMP%]{border:2px solid #FFD700}.fiscal-card[_ngcontent-%COMP%]   .big-amount[_ngcontent-%COMP%]{color:#000}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:50px 0;gap:12px;color:#888;font-size:14px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: #FFD700}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:50px 20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin:12px 0 6px;color:#888}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#aaa;text-transform:capitalize}']}))}return r(),l})();const x=_}}]);