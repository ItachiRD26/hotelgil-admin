"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[624],{624:(F,g,l)=>{l.r(g),l.d(g,{RoomsPage:()=>O});var p=l(467),_=l(2200),a=l(5845),u=l(5079),d=l(5873),m=l(2615),t=l(3664),f=l(1467);const h=(i,r)=>r.roomNumber;function b(i,r){if(1&i){const s=t.RV6();t.j41(0,"ion-button",27),t.bIt("click",function(){m.eBV(s);const n=t.XpG();return m.Njj(n.goToToday())}),t.EFF(1," Hoy "),t.k0s()}}function x(i,r){1&i&&(t.j41(0,"div",24),t.nrm(1,"ion-spinner",28),t.j41(2,"p"),t.EFF(3,"Cargando habitaciones..."),t.k0s()())}function v(i,r){if(1&i&&(t.j41(0,"div",36)(1,"div",39),t.EFF(2,"Hu\xe9sped"),t.k0s(),t.j41(3,"div",40),t.EFF(4),t.k0s()()),2&i){const s=t.XpG().$implicit;t.R7$(4),t.JRh(s.reservation.guestName)}}function P(i,r){if(1&i&&(t.j41(0,"ion-item",31)(1,"div",32)(2,"div",33)(3,"span",34),t.EFF(4),t.k0s(),t.j41(5,"span",35),t.EFF(6),t.k0s()()(),t.nVh(7,v,5,1,"div",36),t.j41(8,"div",37)(9,"ion-badge",38),t.EFF(10),t.k0s()()()),2&i){const s=r.$implicit,e=t.XpG(2);t.HbH(t.VkB("room-item status-",s.status)),t.R7$(4),t.JRh(s.roomNumber),t.R7$(2),t.JRh(s.roomType),t.R7$(),t.vxM("disponible"!==s.status&&s.reservation?7:-1),t.R7$(2),t.Y8G("color",e.getStatusColor(s.status)),t.R7$(),t.SpI(" ",e.getStatusText(s.status)," ")}}function R(i,r){1&i&&(t.j41(0,"div",30)(1,"p"),t.EFF(2,"No hay habitaciones en esta categor\xeda"),t.k0s()())}function C(i,r){if(1&i&&(t.j41(0,"ion-list",25),t.Z7z(1,P,11,8,"ion-item",29,h),t.nVh(3,R,3,0,"div",30),t.k0s()),2&i){const s=t.XpG();t.R7$(),t.Dyx(s.filteredRooms),t.R7$(2),t.vxM(0===s.filteredRooms.length?3:-1)}}let O=(()=>{var i;class r{constructor(e,n){this.hotelService=e,this.menuCtrl=n,this.rooms=[],this.filteredRooms=[],this.loading=!1,this.selectedFilter="all",this.selectedDate=new Date,this.lastUpdate=new Date,(0,u.a)({refreshOutline:d.mVv,chevronBackOutline:d.fKZ,chevronForwardOutline:d.N05,menuOutline:d.Kuj})}ngOnInit(){this.loadRooms()}openMenu(){var e=this;return(0,p.A)(function*(){yield e.menuCtrl.open("main-menu")})()}loadRooms(){var e=this;return(0,p.A)(function*(){e.loading=!0;try{e.rooms=yield e.hotelService.getRoomsWithStatus(e.selectedDate),e.applyFilter(e.selectedFilter),e.lastUpdate=new Date}catch(n){console.error("Error loading rooms:",n)}finally{e.loading=!1}})()}changeDate(e){const n=new Date(this.selectedDate);n.setDate(n.getDate()+e),this.selectedDate=n,this.loadRooms()}goToToday(){this.selectedDate=new Date,this.loadRooms()}getFormattedDate(){return this.selectedDate.toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}isToday(){return this.selectedDate.toDateString()===(new Date).toDateString()}handleRefresh(e){var n=this;return(0,p.A)(function*(){yield n.loadRooms(),e.target.complete()})()}setFilter(e){this.applyFilter(e)}applyFilter(e){this.selectedFilter=e,this.filteredRooms="all"===e?[...this.rooms]:this.rooms.filter(n=>n.status===e)}getStatusColor(e){return{disponible:"success",reservada:"warning",ocupada:"danger"}[e]??"medium"}getStatusText(e){return{disponible:"Disponible",reservada:"Reservada",ocupada:"Ocupada"}[e]??e}getStatsCount(e){return this.rooms.filter(n=>n.status===e).length}static#t=i=()=>(this.\u0275fac=function(n){return new(n||r)(t.rXU(f.g),t.rXU(a._t))},this.\u0275cmp=t.VBU({type:r,selectors:[["app-rooms"]],decls:53,vars:19,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","menu-outline"],["slot","end"],["slot","icon-only","name","refresh-outline"],[1,"rooms-content"],["slot","fixed",3,"ionRefresh"],["pullingText","Desliza para actualizar"],[1,"date-row"],["fill","clear",1,"nav-btn",3,"click"],["slot","icon-only","name","chevron-back-outline"],[1,"date-center"],[1,"date-title"],["size","small","fill","outline",1,"today-btn"],["slot","icon-only","name","chevron-forward-outline"],[1,"stats-grid"],[1,"stat-pill","available"],[1,"stat-num"],[1,"stat-label"],[1,"stat-pill","reserved"],[1,"stat-pill","occupied"],[1,"filter-wrap"],[1,"filter-btns"],[1,"filter-btn",3,"click"],[1,"loading-container"],[1,"rooms-list"],[1,"last-update"],["size","small","fill","outline",1,"today-btn",3,"click"],["name","crescent"],["lines","none",3,"class"],[1,"empty-state"],["lines","none"],[1,"room-left"],[1,"room-number"],[1,"num"],[1,"type"],[1,"room-middle"],["slot","end",1,"room-right"],[1,"status-badge",3,"color"],[1,"guest-label"],[1,"guest-name"]],template:function(n,o){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.bIt("click",function(){return o.openMenu()}),t.nrm(4,"ion-icon",2),t.k0s()(),t.j41(5,"ion-title"),t.EFF(6,"HotelGil"),t.k0s(),t.j41(7,"ion-buttons",3)(8,"ion-button",1),t.bIt("click",function(){return o.loadRooms()}),t.nrm(9,"ion-icon",4),t.k0s()()()(),t.j41(10,"ion-content",5)(11,"ion-refresher",6),t.bIt("ionRefresh",function(M){return o.handleRefresh(M)}),t.nrm(12,"ion-refresher-content",7),t.k0s(),t.j41(13,"div",8)(14,"ion-button",9),t.bIt("click",function(){return o.changeDate(-1)}),t.nrm(15,"ion-icon",10),t.k0s(),t.j41(16,"div",11)(17,"div",12),t.EFF(18),t.k0s(),t.nVh(19,b,2,0,"ion-button",13),t.k0s(),t.j41(20,"ion-button",9),t.bIt("click",function(){return o.changeDate(1)}),t.nrm(21,"ion-icon",14),t.k0s()(),t.j41(22,"div",15)(23,"div",16)(24,"div",17),t.EFF(25),t.k0s(),t.j41(26,"div",18),t.EFF(27,"Disponibles"),t.k0s()(),t.j41(28,"div",19)(29,"div",17),t.EFF(30),t.k0s(),t.j41(31,"div",18),t.EFF(32,"Reservadas"),t.k0s()(),t.j41(33,"div",20)(34,"div",17),t.EFF(35),t.k0s(),t.j41(36,"div",18),t.EFF(37,"Ocupadas"),t.k0s()()(),t.j41(38,"div",21)(39,"div",22)(40,"button",23),t.bIt("click",function(){return o.setFilter("all")}),t.EFF(41," Todas "),t.k0s(),t.j41(42,"button",23),t.bIt("click",function(){return o.setFilter("disponible")}),t.EFF(43," Libres "),t.k0s(),t.j41(44,"button",23),t.bIt("click",function(){return o.setFilter("reservada")}),t.EFF(45," Reservadas "),t.k0s(),t.j41(46,"button",23),t.bIt("click",function(){return o.setFilter("ocupada")}),t.EFF(47," Ocupadas "),t.k0s()()(),t.nVh(48,x,4,0,"div",24),t.nVh(49,C,4,1,"ion-list",25),t.j41(50,"div",26),t.EFF(51),t.nI1(52,"date"),t.k0s()()),2&n&&(t.R7$(18),t.JRh(o.getFormattedDate()),t.R7$(),t.vxM(o.isToday()?-1:19),t.R7$(6),t.JRh(o.getStatsCount("disponible")),t.R7$(5),t.JRh(o.getStatsCount("reservada")),t.R7$(5),t.JRh(o.getStatsCount("ocupada")),t.R7$(5),t.AVh("active","all"===o.selectedFilter),t.R7$(2),t.AVh("active","disponible"===o.selectedFilter),t.R7$(2),t.AVh("active","reservada"===o.selectedFilter),t.R7$(2),t.AVh("active","ocupada"===o.selectedFilter),t.R7$(2),t.vxM(o.loading?48:-1),t.R7$(),t.vxM(o.loading?-1:49),t.R7$(2),t.SpI(" Actualizado: ",t.i5U(52,16,o.lastUpdate,"HH:mm")," "))},dependencies:[_.MD,a.eU,a.ai,a.BC,a.QW,a.Jm,a.iq,a.W9,a.To,a.Ki,a.nf,a.uz,a.In,a.w2,_.vh],styles:[".rooms-content[_ngcontent-%COMP%]{--background: #f0f4f8;--padding-start: 14px;--padding-end: 14px;--padding-top: 10px;--padding-bottom: 20px}.date-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:44px 1fr 44px;align-items:center;gap:6px;margin:10px 0 12px;padding:10px 8px;border-radius:16px;background:#fff;box-shadow:0 2px 10px #00000012}.nav-btn[_ngcontent-%COMP%]{height:40px;width:40px;--padding-start: 0;--padding-end: 0}.date-center[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.date-title[_ngcontent-%COMP%]{font-size:13px;font-weight:800;text-align:center;text-transform:capitalize;color:#1a1a2e}.today-btn[_ngcontent-%COMP%]{--border-radius: 999px;font-weight:700;font-size:12px;height:26px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:12px}.stat-pill[_ngcontent-%COMP%]{border-radius:16px;padding:14px 8px;text-align:center;background:#fff;box-shadow:0 4px 12px #0000000f}.stat-num[_ngcontent-%COMP%]{font-size:30px;font-weight:900;line-height:1}.stat-label[_ngcontent-%COMP%]{margin-top:6px;font-size:11px;font-weight:700;color:#666}.stat-pill.available[_ngcontent-%COMP%]{border-top:4px solid #22c55e}.stat-pill.available[_ngcontent-%COMP%]   .stat-num[_ngcontent-%COMP%]{color:#16a34a}.stat-pill.reserved[_ngcontent-%COMP%]{border-top:4px solid #eab308}.stat-pill.reserved[_ngcontent-%COMP%]   .stat-num[_ngcontent-%COMP%]{color:#ca8a04}.stat-pill.occupied[_ngcontent-%COMP%]{border-top:4px solid #ef4444}.stat-pill.occupied[_ngcontent-%COMP%]   .stat-num[_ngcontent-%COMP%]{color:#dc2626}.filter-wrap[_ngcontent-%COMP%]{margin:0 0 14px}.filter-btns[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}.filter-btn[_ngcontent-%COMP%]{padding:10px 4px;border:2px solid #e0e0e0;border-radius:12px;background:#fff;color:#666;font-size:12px;font-weight:700;cursor:pointer;transition:all .15s;-webkit-tap-highlight-color:transparent}.filter-btn.active[_ngcontent-%COMP%]{background:#1a1a2e;color:#fff;border-color:#1a1a2e}.filter-btn[_ngcontent-%COMP%]:active{opacity:.75;transform:scale(.97)}.rooms-list[_ngcontent-%COMP%]{padding:0;background:transparent;--ion-item-background: transparent}.room-item[_ngcontent-%COMP%]{--background: #fff;--padding-start: 14px;--padding-end: 14px;--inner-padding-end: 0;margin-bottom:10px;border-radius:16px;overflow:hidden;box-shadow:0 4px 14px #00000012}.room-item[_ngcontent-%COMP%]::part(native){border-radius:16px;padding-top:14px;padding-bottom:14px;display:flex;align-items:center;gap:12px}.room-left[_ngcontent-%COMP%]{min-width:80px;flex-shrink:0}.room-number[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px}.room-number[_ngcontent-%COMP%]   .num[_ngcontent-%COMP%]{font-size:22px;font-weight:900;color:#1a1a2e;line-height:1}.room-number[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#888}.room-middle[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden}.guest-label[_ngcontent-%COMP%]{font-size:10px;font-weight:800;color:#aaa;text-transform:uppercase;letter-spacing:.5px}.guest-name[_ngcontent-%COMP%]{font-size:14px;font-weight:800;color:#1a1a2e;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.room-right[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;flex-shrink:0}.status-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:800;padding:6px 12px;border-radius:999px;white-space:nowrap}.status-disponible[_ngcontent-%COMP%]{border-left:5px solid #22c55e}.status-reservada[_ngcontent-%COMP%]{border-left:5px solid #eab308}.status-ocupada[_ngcontent-%COMP%]{border-left:5px solid #ef4444}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px 0;gap:12px;color:#888;font-size:14px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#aaa;font-size:14px;font-weight:600}.last-update[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#aaa;font-weight:600;margin:14px 0 4px}"]}))}return i(),r})()}}]);